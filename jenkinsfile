pipeline {
agent any
tools {
  maven 'm1'
}

 stage('build') {
    steps {
        sh 'mvn clean install' 
    }
  }

  stage('test') {
    steps {
      sh 'mvn test'
    }

    post {
      always {
        archiveArtifacts artifacts: 'Amazon-Core/target/**.jar', followSymlinks: false
        junit 'Amazon-Core/target/surefire-reports/*.*xml'
      }
    }
  }
 stage('run') {
    steps {
    sh 'cp Amazon-Web/target/*.war /opt/aptomcat/webapps/'
    sh '/opt/aptomcat/bin/startup.sh'
        
    }
  }
stage('deploy')
{
steps{
echo "this is amazon pipeline"

}
 }
